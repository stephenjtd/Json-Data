<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>An Cosan Library</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 1.36" />
	<!--Next tag for mobile devices-->
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"/>

<style>

.clr_btn {
  visibility: hidden;
}

.collapsible {
  background-color: white;
  color: blue;
  cursor: pointer;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 18px;
}

.content {
  padding: 0 18px;
  display: none;
  overflow: hidden;
  font-size: 18px;
  
}


/* Dropdown Button */
.dropbtn {
  background-color: #3498DB;
  color: white;
  /*margin-left: 237px;*/
  min-width: 140px;
  padding: 6px 10px;
  font-size: 18px;
  border: none;
  cursor: pointer;
}

/* Dropdown button on hover & focus */
.dropbtn:hover, .dropbtn:focus {
  background-color: #2980B9;
}

/* The container <div> - needed to position the dropdown content */
.dropdown {
  position: relative;
  display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
  display: none;
  /*margin-left: 174px;*/
  position: absolute;
  background-color: #f1f1f1;
  min-width: 440px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content button {
  color: black;
  padding: 6px 16px;
  width: 250px;
  text-decoration: none;
  display: block;
  /*min-height: 100px;*/
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #ddd}

.btn { 
  background-color: green;
  color: white;
  min-width: 140px;
  padding: 6px 10px;
  font-size: 18px;
  border: none;
  cursor: pointer;
}

.my_s {
  font-size: 18px;
}

.dropdown_btn {
  font-size: 18px;
}

.cell_data {
  font-size: 18px;
}


/* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
.show {display:block;}

.book-image { width: 128px; height: 197px; }

* { box-sizing: border-box; }

</style>
</head>

<body>
	<h2>An Cosan Library</h2>
	
	<input type="search" class="my_s" id="mysearch" name="mysearch">
        <p><input type="button" class="btn" id="title" value="Find Title" onclick="titlebtn()" /></p>
	<p><input type="button" class="btn" id="author" value="Find Author" onclick="authorbtn()" /></p>
	<p><input type="button" class="btn" id="other_value" value="Find Other" onclick="otherbtn()" /></p>
	
	<div id="dd_id"></div>
	<div id=<"dd_row></div>
	
		<div class="dropdown">
  		<input type="button" id="category_dropdown" class="dropbtn" value="Category" onclick="dropdownCategories()"/>
  		<div id="myDropdown1" class="dropdown-content">
			<table style="width:100%">
 			 <tr>
    				<th><button class ="dropdown_btn" id="c1" onclick="dropdown_content_clicked1()" value ="Fiction">All Fiction</button></th>
				<th><button class ="dropdown_btn" id="c12" onclick="dropdown_content_clicked12()" value ="Non-fiction">Non-fiction</button></th>
   				<th><button class ="dropdown_btn" id="c24" onclick="dropdown_content_clicked24()" value ="Business">Business</button></th> 
   				 
   				 
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c11" onclick="dropdown_content_clicked11()" value ="Contemporary Fiction">Contemporary Fiction</button></th>
    				<th><button class ="dropdown_btn" id="c6" onclick="dropdown_content_clicked6()" value ="Biography">Biography</button></th>
				<th><button class ="dropdown_btn" id="c30" onclick="dropdown_content_clicked30()" value ="Environment">Environmental Issues</button></th>
   				 
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c8" onclick="dropdown_content_clicked8()" value ="Crime">Crime and Mystery</button></th>
    				<th><button class ="dropdown_btn" id="c7" onclick="dropdown_content_clicked7()" value ="Children's">All Children's</button></th>
				<th><button class ="dropdown_btn" id="c18" onclick="dropdown_content_clicked18()" value ="Feminism">Feminism</button></th>
   				 
  
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c15" onclick="dropdown_content_clicked15()" value ="Historical-fiction">Historical-fiction</button></th>
    				<th><button class ="dropdown_btn" id="c19" onclick="dropdown_content_clicked19()" value ="Picture Book">Picture Books</button></th>
   				<th><button class ="dropdown_btn" id="c28" onclick="dropdown_content_clicked28()" value ="Health">Health</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c13" onclick="dropdown_content_clicked13()" value ="Adult">Adult</button></th>
				<th><button class ="dropdown_btn" id="c25" onclick="dropdown_content_clicked25()" value ="Storybook">Story Book</button></th>
   				  <th><button class ="dropdown_btn" id="c5" onclick="dropdown_content_clicked5()" value ="History">History</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c14" onclick="dropdown_content_clicked14()" value ="Romance">Romance</button></th>
				<th><button class ="dropdown_btn" id="c26" onclick="dropdown_content_clicked26()" value ="Children's Fiction">Children's Fiction</button></th>
				<th><button class ="dropdown_btn" id="c31" onclick="dropdown_content_clicked31()" value ="Philosophy">Philosophy</button></th>
 			 </tr>
			  <tr>
    				<th><button class ="dropdown_btn" id="c9" onclick="dropdown_content_clicked9()" value ="Science Fiction">Science Fiction</button></th>
				<th><button class ="dropdown_btn" id="c27" onclick="dropdown_content_clicked27()" value ="Educational">Educational & Fact Books</button></th>
				<th><button class ="dropdown_btn" id="c32" onclick="dropdown_content_clicked32()" value ="Psychology">Psychology</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c10" onclick="dropdown_content_clicked10()" value ="Fantasy">Fantasy</button></th>
    				<th></th>
				<th><button class ="dropdown_btn" id="c33" onclick="dropdown_content_clicked33()" value ="Reference">Reference</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c23" onclick="dropdown_content_clicked23()" value ="Thriller">Thriller</button></th>
    				<th></th>
   				 <th><button class ="dropdown_btn" id="c4" onclick="dropdown_content_clicked4()" value ="Religio">Religion & Spirituality</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c16" onclick="dropdown_content_clicked16()" value ="Young-adult">Young-adult</button></th>
    				<th></th>
				<th><button class ="dropdown_btn" id="c34" onclick="dropdown_content_clicked34()" value ="Science">Science</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c21" onclick="dropdown_content_clicked21()" value ="Short Stories">Short Stories</button></th>
    				<th></th>
   				 <th><button class ="dropdown_btn" id="c17" onclick="dropdown_content_clicked17()" value ="Self-Help">Self-Help</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c20" onclick="dropdown_content_clicked20()" value ="Anthologies">Anthologies</button></th>
    				<th></th>
   				 <th><button class ="dropdown_btn" id="c29" onclick="dropdown_content_clicked29()" value ="Society">Society and Culture</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c2" onclick="dropdown_content_clicked2()" value ="Poetry">Poetry</button></th>
    				<th></th>
   				 <th><button class ="dropdown_btn" id="c22" onclick="dropdown_content_clicked22()" value ="Travel">Travel</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="c3" onclick="dropdown_content_clicked3()" value ="Drama">Drama</button></th>
    				<th></th>
   				 <th><button class ="dropdown_btn" id="c100" onclick="dropdown_content_clicked100()" value ="Others">Other</button></th>
 			 </tr>
			</table>
   			
			
  		</div>
	</div>

	<p><div class="dropdown">
  		<input type="button" id="bookshelf_dropdown" class="dropbtn" value="Bookshelf" onclick="dropdownFunction()"/>
  		<div id="myDropdown" class="dropdown-content">
			<table style="width:100%">
 			 <tr>
    				<th><button class ="dropdown_btn" id="d1" onclick="dropdown_content_clicked1()" value ="A1 Fiction">A1: Fiction</button></th>
    				<th><button class ="dropdown_btn" id="d7" onclick="dropdown_content_clicked7()" value ="B1 Fiction">B1: Fiction</button></th>
   				 <th><button class ="dropdown_btn" id="d13" onclick="dropdown_content_clicked13()" value ="C1">C1 General Knowledge</button></th>
   				 <th><button class ="dropdown_btn" id="d19" onclick="dropdown_content_clicked19()" value ="D1">D1 General Knowledge</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="d2" onclick="dropdown_content_clicked2()" value ="A2 Fiction">A2: Fiction</button></th>
    				<th><button class ="dropdown_btn" id="d8" onclick="dropdown_content_clicked8()" value ="B2 Fiction">B2: Fiction</button></th>
   				 <th><button class ="dropdown_btn" id="d14" onclick="dropdown_content_clicked14()" value ="C2">C2</button></th>
   				 <th><button class ="dropdown_btn" id="d20" onclick="dropdown_content_clicked20()" value ="D2">D2 Health</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="d3" onclick="dropdown_content_clicked3()" value ="A3 Fiction">A3: Fiction</button></th>
    				<th><button class ="dropdown_btn" id="d9" onclick="dropdown_content_clicked9()" value ="B3 Fiction">B3: Fiction</button></th>
   				 <th><button class ="dropdown_btn" id="d15" onclick="dropdown_content_clicked15()" value ="C3">C3 Spirituality</button></th>
   				 <th><button class ="dropdown_btn" id="d21" onclick="dropdown_content_clicked21()" value ="D3">D3 Health</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="d4" onclick="dropdown_content_clicked4()" value ="A4 Children's">A4: Children's</button></th>
    				<th><button class ="dropdown_btn" id="d10" onclick="dropdown_content_clicked10()" value ="B4">B4 Children's</button></th>
   				 <th><button class ="dropdown_btn" id="d16" onclick="dropdown_content_clicked16()" value ="C4">C4 Spirituality</button></th>
   				 <th><button class ="dropdown_btn" id="d22" onclick="dropdown_content_clicked16()" value ="D4">D4 General Knowledge</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="d5" onclick="dropdown_content_clicked5()" value ="A5 Children's">A5: Children's</button></th>
    				<th><button class ="dropdown_btn" id="d11" onclick="dropdown_content_clicked11()" value ="B5">B5 Children's</button></th>
   				 <th><button class ="dropdown_btn" id="d17" onclick="dropdown_content_clicked11()" value ="C5">C5</button></th>
   				 <th><button class ="dropdown_btn" id="d23" onclick="dropdown_content_clicked11()" value ="D5">D5 Business</button></th>
 			 </tr>
 			 <tr>
    				<th><button class ="dropdown_btn" id="d6" onclick="dropdown_content_clicked6()" value ="A6 Children's">A6: Children's</button></th>
    				<th><button class ="dropdown_btn" id="d12" onclick="dropdown_content_clicked12()" value ="B6">B6 Children's</button></th>
   				 <th><button class ="dropdown_btn" id="d18" onclick="dropdown_content_clicked12()" value ="C6">C6</button></th>
   				 <th><button class ="dropdown_btn" id="d24" onclick="dropdown_content_clicked12()" value ="D6">D6</button></th>
   				 <th></th>
 			 </tr>
			</table>
   			
			
			<button class ="dropdown_btn" id="d100" onclick="dropdown_content_clicked100()" value ="Other">Other: Not sorted</button>
  		</div>
	</div></p>
	<p id="results_number"></p>
	<button id="clr_btn1" class="clr_btn" onclick = "clearbtnClicked()">Clear Results</button>
	<p id="mydata"></p>
	<div id="MainTable"></div>

	<!--START OF JAVASCRIPT.  Call up file once button is clicked-->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js' />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.13.5/jszip.js"></script>
	<script src="library2.js"></script>
	<script type="text/javascript">
let titleArray = new Array(2400);
let idArray = new Array(2400);
var count = 1;
var isMobile = false;

if (navigator.userAgent.toLowerCase().match(/mobile/i)) {
	isMobile = true;  
}

function dropdownFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
  //for bookshelf dropdown
  var dd_id = document.getElementById("dd_id");
  dd_id.value = "bookshelf";
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}

function dropdownCategories() {
  document.getElementById("myDropdown1").classList.toggle("show");
  //for bookshelf dropdown
  var dd_id = document.getElementById("dd_id");
  dd_id.value = "category";
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}

function dropdown_content_clicked1(){
	var n = 1;
	load_dropdown_content(n);
}

function dropdown_content_clicked2(){
	var n = 2;
	load_dropdown_content(n);
}

function dropdown_content_clicked3(){
	var n = 3;
	load_dropdown_content(n);
}

function dropdown_content_clicked4(){
	var n = 4;
	load_dropdown_content(n);
}

function dropdown_content_clicked5(){
	var n = 5;
	load_dropdown_content(n);
}

function dropdown_content_clicked6(){
	var n = 6;
	load_dropdown_content(n);
}

function dropdown_content_clicked7(){
	var n = 7;
	load_dropdown_content(n);
}

function dropdown_content_clicked8(){
	var n = 8;
	load_dropdown_content(n);
}

function dropdown_content_clicked9(){
	var n = 9;
	load_dropdown_content(n);
}

function dropdown_content_clicked10(){
	var n = 10;
	load_dropdown_content(n);
}

function dropdown_content_clicked11(){
	var n = 11;
	load_dropdown_content(n);
}

function dropdown_content_clicked12(){
	var n = 12;
	load_dropdown_content(n);
}

function dropdown_content_clicked13(){
	var n = 13;
	load_dropdown_content(n);
}

function dropdown_content_clicked14(){
	var n = 14;
	load_dropdown_content(n);
}

function dropdown_content_clicked15(){
	var n = 15;
	load_dropdown_content(n);
}

function dropdown_content_clicked16(){
	var n = 16;
	load_dropdown_content(n);
}

function dropdown_content_clicked17(){
	var n = 17;
	load_dropdown_content(n);
}

function dropdown_content_clicked18(){
	var n = 18;
	load_dropdown_content(n);
}

function dropdown_content_clicked19(){
	var n = 19;
	load_dropdown_content(n);
}

function dropdown_content_clicked20(){
	var n = 20;
	load_dropdown_content(n);
}

function dropdown_content_clicked21(){
	var n = 21;
	load_dropdown_content(n);
}

function dropdown_content_clicked22(){
	var n = 22;
	load_dropdown_content(n);
}

function dropdown_content_clicked23(){
	var n = 23;
	load_dropdown_content(n);
}

function dropdown_content_clicked24(){
	var n = 24;
	load_dropdown_content(n);
}

function dropdown_content_clicked25(){
	var n = 25;
	load_dropdown_content(n);
}

function dropdown_content_clicked26(){
	var n = 26;
	load_dropdown_content(n);
}

function dropdown_content_clicked27(){
	var n = 27;
	load_dropdown_content(n);
}

function dropdown_content_clicked28(){
	var n = 28;
	load_dropdown_content(n);
}

function dropdown_content_clicked29(){
	var n = 29;
	load_dropdown_content(n);
}

function dropdown_content_clicked30(){
	var n = 30;
	load_dropdown_content(n);
}

function dropdown_content_clicked31(){
	var n = 31;
	load_dropdown_content(n);
}

function dropdown_content_clicked32(){
	var n = 32;
	load_dropdown_content(n);
}

function dropdown_content_clicked33(){
	var n = 33;
	load_dropdown_content(n);
}

function dropdown_content_clicked34(){
	var n = 34;
	load_dropdown_content(n);
}

function dropdown_content_clicked100(){
	var n = 100;
	load_dropdown_content(n);
}

function load_dropdown_content(n){
	var dd_id = document.getElementById("dd_id").value;
	var searchterm = "";
	if(dd_id === "category")
		searchterm = document.getElementById("c"+n).value;
	else
 		searchterm = document.getElementById("d"+n).value;
   
	var searchtype = dd_id;
	var s_value = document.getElementById("mysearch");
	s_value.value = searchterm;
	loadNames(searchtype);
}

function titlebtn(){
	var searchtype= "title";
	loadNames(searchtype);
}

function authorbtn(){
	var searchtype= "author";
	loadNames(searchtype);
}

function otherbtn(){
	var searchtype= "other";
	loadNames(searchtype);
}

function clearbtnClicked(){
	//clear results
	var table1 = document.getElementById("MainTable");
	table1.style.visibility = "hidden";
	var clrbtn = document.getElementById("clr_btn1");
	clrbtn.style.visibility = "hidden";
	var resultsN = document.getElementById("results_number");
	resultsN.style.visibility = "hidden";
	var s_value = document.getElementById("mysearch");
	s_value.value = "";
}
    
  async function loadNames(searchtype) {
  var searchterm = document.getElementById('mysearch').value;

  //if no value entered
  if(searchterm === ""){
	alert("No value entered.");
  }
  else{
	

  const obj = lib;
  //Create a HTML Table element.
  var myTable  = document.createElement("table");
  myTable.border = "1";

  //Add the header row.
  var row = myTable.insertRow(-1);
 
  //Add the header cells.
   var headerCell = document.createElement("TH");
   headerCell.innerHTML = "Results";
   row.appendChild(headerCell);

  var found = false;
  var f2 = false;
  var resultsFound = 0;
  const category_array = ["Fiction", "Contemporary Fiction", "Crime", "Historical-fiction", "Adult", "Romance", "Science Fiction", "Fantasy", "Thriller", "Young-adult", "Short Stories", "Anthologies", "Poetry", "Drama", "Non-fiction", "Biography", "Children's", "Picture Book", "Story Book", "Children's Fiction", "Educational", "Business", "Environment", "Feminism", "Health", "History", "Philosophy", "Psychology", "Reference", "Religio", "Science", "Self-Help", "Society", "Travel"];    

  for (var i = 0; i < obj.length; i++) {
	 //document.getElementById("mydata").innerHTML = obj[i].Title + ", " + obj[i].Authors;
	//get searchtype
		
		if(searchtype.includes("title"))
			if(obj[i].Title.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
		if(searchtype.includes("author"))
			if(obj[i].Authors.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
		if(searchtype.includes("category"))
			if(obj[i].Categories.toLowerCase().includes(searchterm.toLowerCase())){
				found = true;
				if(searchterm === "Fiction")
					if(obj[i].Categories.toLowerCase().includes("children's"))
						found = false;

			}
			else if(searchterm === "Others"){
				//look for book that does not have a dropdown menu category
				//check from array of categories
				var hascat = false;
				
				for (var j = 0; j < category_array.length; j++){
					if(obj[i].Categories.toLowerCase().includes(category_array[j].toLowerCase())){
						hascat = true;//category on list
						break;
					}
				}
				if(hascat)
					found = false;
				else
					found = true;	
			}


		if(searchtype.includes("bookshelf"))
			if(obj[i].Bookshelf.includes(searchterm))
				found = true;
		if(searchtype.includes("other")){
			//search other fields
			if(obj[i].Subtitle.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Illustrators.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Publisher.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Series.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Editors.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].ISBN.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Format.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Title.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
			if(obj[i].Categories.toLowerCase().includes(searchterm.toLowerCase()))
				found = true;
		}
	
		
 		if(found){	
			f2 = true;
			count++;
			//Add the data row.
            		var row = myTable.insertRow(-1);
 
            		//Add the data cells.

            		var cell = row.insertCell(-1);
			var cell2 = row.insertCell(-1);
			cell2.id = "c"+i;
			
			var details = '<div class="cell_data" ><b>' + obj[i].Title + '</b><br/>';
			if (!(obj[i].Subtitle === "")){
				//if title contains subtitle
				if (obj[i].Title.toLowerCase().includes(obj[i].Subtitle.toLowerCase()))
					;
				else
					details+= "<b>" + obj[i].Subtitle + "</b><br/>";
			}

			details += obj[i].Authors + "<br/>";

			//if book has illustrator
			if (!(obj[i].Illustrators === ""))
					if ((obj[i].Illustrators === "undefined"))
						;
					else
						details+= "Illustrated by " + obj[i].Illustrators + "<br/>";

			details += "<br/>Bookshelf: " + obj[i].Bookshelf + "<br/>Categories: " + obj[i].Categories;




			//Replace disallowed file characters
			var fileTitle = obj[i].Title;
			for(var j = 0; j < fileTitle.length; j++){
			if (obj[i].Title.includes(":")){
				fileTitle = fileTitle.replace(":", "_");
			}

			if (obj[i].Title.includes("'")){
				fileTitle = fileTitle.replace("'", "_");
			}

			if (obj[i].Title.includes("#")){
				fileTitle = fileTitle.replace("#", "%23");
			}

			if (obj[i].Title.includes("/")){
				var tempTitle = fileTitle.replace("/", "_");
				fileTitle = tempTitle;
			}

			
			//if (obj[i].Title.includes(".")){
			//	fileTitle = fileTitle.replace(".", "_");
			//}
			}//for j

			var testclick = false;
			titleArray[i] = fileTitle;
			idArray[i] = obj[i].Book_Id;
			
			details+= '</div><br/><input type="button" id="my_c'+i+'" class ="collapsible" value="More" onclick="load_description('+i+')" /><div class="content" id="mydiv'+i+'">';
			if(isMobile)
				details+= '<br/><div id="cdiv'+i+'"><img id="im'+i+'"src="Covers/'+idArray[i]+'.png" alt="No image available" width="128" height="197"></div>';
			

			if (!(obj[i].Series === ""))
				details+= "<br/>Series: " + obj[i].Series;

			if (!(obj[i].Volume === ""))
				details+= "<br/>Volume: " + obj[i].Volume;

			details += "<br/>Publisher: " + obj[i].Publisher;


			if (!(obj[i].Editors === ""))
				details+= "<br/>Editor: " + obj[i].Editors;
			
			
			if (!(obj[i].ISBN === ""))
				details+= "<br/>ISBN: " + obj[i].ISBN;

			if (!(obj[i].Format === ""))
 				details+= "<br/>Format: " + obj[i].Format;

			details+= '<br/>Copies: ' + obj[i].Copies;


			details+= '<p>' + obj[i].Description + '</p></div>';

			cell.innerHTML = details;


			//let coverFile = await fetch('https://raw.githubusercontent.com/stephenjtd/Cover_Data/main/'+fileTitle+'.txt');
  			//let covercode = await coverFile.text();
			//var coverdata = '<div class="content" id="cdiv'+i+'">'+covercode+'></div>';

			//cell2.innerHTML = coverdata;

			resultsFound++;
			//if(count < 3){
			//	cell.innerHTML = count;
			//	i--;
			//}

			
		}
		
			

	found = false;
  }//for

	var resultsN = document.getElementById("results_number");
	resultsN.style.visibility = "visible";
	resultsN.innerHTML = resultsFound + ' results found.';
	var clrbtn = document.getElementById("clr_btn1");
	clrbtn.style.visibility = "visible";

        var Table1 = document.getElementById("MainTable");
	Table1.style.visibility = "visible";
        Table1.innerHTML = "";
        Table1.appendChild(myTable); 	

	if(f2){

 
	}
	else
		alert("Search value not found.");

  }//else
}//loadnames

async function load_description(i){


	var coll = document.getElementById("my_c"+i);//more or less button
	var titleObj = titleArray[i];
	var bookId = idArray[i];
			//cell in 2nd column
			var c2 = document.getElementById("c"+i);
			//c2.innerHTML = "";
    			var content = document.getElementById("mydiv"+i);
			//var content = this.nextElementSibling;

			 var fileTitle = titleObj;



    			if (content.style.display === "block") {
			 //if not empty
     			 content.style.display = "none";
			 coll.value = "More";
			 //also need to collapse cover cell
    			} 
			else {
			 //if nothing displayed, expand.
     			 content.style.display = "block";

			var coverdata = '<div class="content" id="cdiv'+i+'"><img id="im'+i+'"src="Covers/'+bookId+'.png" alt="No image available" width="128" height="197"></div>';

			//Place cover data div in cell
			//c2.innerHTML = coverdata;
				if (coverdata.includes("404: Not Found")){
					coverdata = '<div class="content" id="cdiv'+i+'">No cover image available!</div>';
				}
			//Only put in 2nd column if not on mobile phone
			if(isMobile==false)
				c2.innerHTML = coverdata;
			 coll.value = "Less";
			 
   			 }//else

			if(isMobile==false)
				load_cover(i);	
					
			
  			
	
}

async function load_cover(i){
			//Function should only be called if expanding or collapsing cover image.  
    			var content = document.getElementById("cdiv"+i);
			//var content = this.nextElementSibling;
			try{
    				if (content.style.display === "block") {
     			 		content.style.display = "none";
    				} 
				else {
     			 	content.style.display = "block";
   			 	}
			}
			catch(err){
				//var c2 = document.getElementById("c"+i);
				//c2.innerHTML = "caught";
			}
			
  			
	
}





</script>
</body>

</html>